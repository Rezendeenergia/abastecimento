<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Rezende Energia - Gest√£o de Abastecimento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 50%, #d4761a 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 50%, #d4761a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .login-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            border-radius: 15px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .login-logo::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 40px;
            height: 40px;
            background: white;
            clip-path: polygon(0% 0%, 70% 0%, 100% 30%, 100% 100%, 30% 100%, 0% 70%);
        }

        .login-logo::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 32px;
            height: 32px;
            background: #1a1a1a;
            clip-path: polygon(30% 0%, 100% 0%, 100% 70%, 70% 100%, 0% 100%, 0% 30%);
            z-index: 1;
        }

        .login-title {
            font-size: 1.8em;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .login-subtitle {
            color: #64748b;
            margin-bottom: 30px;
        }

        .role-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .role-btn {
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(247, 147, 30, 0.3);
        }

        .role-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(247, 147, 30, 0.4);
        }

        .role-btn.supervisor {
            background: linear-gradient(135deg, #1a1a1a 0%, #404040 100%);
            box-shadow: 0 4px 12px rgba(26, 26, 26, 0.3);
        }

        .role-btn.supervisor:hover {
            box-shadow: 0 8px 25px rgba(26, 26, 26, 0.4);
        }

        /* Login Forms */
        .login-form {
            display: none;
            margin-top: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            font-weight: 500;
            color: #374151;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #F7931E;
            box-shadow: 0 0 0 3px rgba(247, 147, 30, 0.1);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 50%, #d4761a 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(247, 147, 30, 0.2);
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            clip-path: polygon(0% 0%, 70% 0%, 100% 30%, 100% 100%, 30% 100%, 0% 70%);
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 24px;
            height: 24px;
            background: #1a1a1a;
            clip-path: polygon(30% 0%, 100% 0%, 100% 70%, 70% 100%, 0% 100%, 0% 30%);
            z-index: 1;
        }

        .logo h1 {
            font-size: 1.8em;
            font-weight: bold;
            position: relative;
            z-index: 2;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .user-role {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Navigation */
        .nav-bar {
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            padding: 0;
            display: flex;
            overflow-x: auto;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
            color: #64748b;
        }

        .nav-item:hover {
            background: #e2e8f0;
            color: #1e293b;
        }

        .nav-item.active {
            background: white;
            border-bottom-color: #F7931E;
            color: #F7931E;
        }

        .nav-item.hidden {
            display: none;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            background: #f8fafc;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            margin-bottom: 25px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f5f9;
        }

        .card-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(247, 147, 30, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(247, 147, 30, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
        }

        th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        tr:hover {
            background: #f8fafc;
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        /* Status badges */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-pending {
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            color: white;
        }

        .status-signed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-fueled {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-completed {
            background: linear-gradient(135deg, #1a1a1a 0%, #404040 100%);
            color: white;
        }

        .status-rejected {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            border-left: 5px solid;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }

        .stat-card.pending {
            border-left-color: #F7931E;
            background: linear-gradient(135deg, rgba(247, 147, 30, 0.05) 0%, rgba(255, 107, 53, 0.05) 100%);
        }
        .stat-card.signed {
            border-left-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
        }
        .stat-card.fueled {
            border-left-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(37, 99, 235, 0.05) 100%);
        }
        .stat-card.completed {
            border-left-color: #1a1a1a;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.05) 0%, rgba(64, 64, 64, 0.05) 100%);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-card.pending .stat-number { color: #F7931E; }
        .stat-card.signed .stat-number { color: #10b981; }
        .stat-card.fueled .stat-number { color: #3b82f6; }
        .stat-card.completed .stat-number { color: #1a1a1a; }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #64748b;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-top: 4px solid #F7931E;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(247, 147, 30, 0.15);
        }

        .action-icon {
            font-size: 3em;
            margin-bottom: 15px;
            color: #F7931E;
        }

        .action-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .action-desc {
            color: #64748b;
            font-size: 0.9em;
        }

        /* Process Flow */
        .process-flow {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        .flow-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .flow-header h3 {
            color: #1e293b;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-step {
            flex: 1;
            min-width: 200px;
            text-align: center;
            position: relative;
        }

        .step-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
            position: relative;
            z-index: 2;
        }

        .step-1 .step-icon { background: linear-gradient(135deg, #F7931E, #ff6b35); }
        .step-2 .step-icon { background: linear-gradient(135deg, #10b981, #059669); }
        .step-3 .step-icon { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .step-4 .step-icon { background: linear-gradient(135deg, #1a1a1a, #404040); }

        .step-title {
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .step-desc {
            color: #64748b;
            font-size: 0.9em;
        }

        .flow-arrow {
            font-size: 1.5em;
            color: #F7931E;
            margin: 0 10px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
            z-index: 1001;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
        }

        .notification.warning {
            background: linear-gradient(135deg, #F7931E 0%, #ff6b35 100%);
            box-shadow: 0 10px 25px rgba(247, 147, 30, 0.3);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 15px;
            }

            .header {
                padding: 15px;
                flex-direction: column;
                gap: 15px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }

            .flow-steps {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-logo"></div>
            <h2 class="login-title">Rezende Energia</h2>
            <p class="login-subtitle">Sistema de Gest√£o de Abastecimento</p>

            <div class="role-buttons" id="role-selection">
                <button class="role-btn" onclick="showDriverLogin()">üöõ Entrar como Motorista</button>
                <button class="role-btn supervisor" onclick="showSupervisorLogin()">üë®‚Äçüíº Entrar como Supervisor</button>
            </div>

            <!-- Login do Motorista -->
            <div class="login-form" id="driver-login">
                <div class="form-group">
                    <label>Selecione seu nome:</label>
                    <select id="driver-name">
                        <option value="">Selecione seu nome</option>
                    </select>
                </div>
                <button class="role-btn" onclick="loginAsDriver()">Entrar</button>
                <button class="role-btn" style="margin-top: 10px; background: #64748b;" onclick="backToRoleSelection()">Voltar</button>
            </div>

            <!-- Login do Supervisor -->
            <div class="login-form" id="supervisor-login">
                <div class="form-group">
                    <label>Usu√°rio:</label>
                    <input type="text" id="supervisor-username" placeholder="Digite seu usu√°rio">
                </div>
                <div class="form-group">
                    <label>Senha:</label>
                    <input type="password" id="supervisor-password" placeholder="Digite sua senha">
                </div>
                <button class="role-btn supervisor" onclick="loginAsSupervisor()">Entrar</button>
                <button class="role-btn" style="margin-top: 10px; background: #64748b;" onclick="backToRoleSelection()">Voltar</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="container" id="main-app" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon"></div>
                <div>
                    <h1>Rezende Energia</h1>
                    <p style="font-size: 0.9em; opacity: 0.9;">Sistema de Gest√£o de Abastecimento</p>
                </div>
            </div>
            <div class="user-info">
                <span class="user-role" id="user-role-display"></span>
                <span>|</span>
                <span id="current-date"></span>
                <button class="logout-btn" onclick="logout()">Sair</button>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-bar">
            <div class="nav-item active" onclick="showScreen('dashboard')">üìä Dashboard</div>
            <div class="nav-item" onclick="showScreen('requests')">üìã Requisi√ß√µes</div>
            <div class="nav-item hidden" id="nav-fuel-records" onclick="showScreen('fuel-records')">‚õΩ Registro de Abastecimento</div>
            <div class="nav-item hidden" id="nav-fuel-prices" onclick="showScreen('fuel-prices')">üí∞ Pre√ßos Combust√≠veis</div>
            <div class="nav-item hidden" id="nav-vehicles" onclick="showScreen('vehicles')">üöö Ve√≠culos</div>
            <div class="nav-item hidden" id="nav-reports" onclick="showScreen('reports')">üìà Relat√≥rios</div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Screen -->
            <div id="dashboard" class="screen active">
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="action-card" onclick="newRequest()">
                        <div class="action-icon">üìã</div>
                        <div class="action-title">Nova Requisi√ß√£o</div>
                        <div class="action-desc">Solicitar abastecimento de ve√≠culo</div>
                    </div>
                    <div class="action-card" onclick="showScreen('reports')" id="action-reports" style="display: none;">
                        <div class="action-icon">üìä</div>
                        <div class="action-title">Relat√≥rios</div>
                        <div class="action-desc">Consultar dados e estat√≠sticas</div>
                    </div>
                    <div class="action-card" onclick="exportToExcel('all')" id="action-export" style="display: none;">
                        <div class="action-icon">üìä</div>
                        <div class="action-title">Exportar Completo</div>
                        <div class="action-desc">Gerar Excel com todas as abas</div>
                    </div>
                </div>

                <!-- Process Flow -->
                <div class="process-flow">
                    <div class="flow-header">
                        <h3>Fluxo do Processo de Abastecimento</h3>
                        <p>Acompanhe cada etapa do processo</p>
                    </div>
                    <div class="flow-steps">
                        <div class="flow-step step-1">
                            <div class="step-icon">üìã</div>
                            <div class="step-title">Criar Requisi√ß√£o</div>
                            <div class="step-desc">Motorista solicita abastecimento</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step step-2">
                            <div class="step-icon">‚úçÔ∏è</div>
                            <div class="step-title">Aprova√ß√£o</div>
                            <div class="step-desc">Supervisor autoriza ou rejeita</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step step-3">
                            <div class="step-icon">‚õΩ</div>
                            <div class="step-title">Abastecimento</div>
                            <div class="step-desc">Processo de abastecimento</div>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step step-4">
                            <div class="step-icon">‚úÖ</div>
                            <div class="step-title">Finaliza√ß√£o</div>
                            <div class="step-desc">Processo conclu√≠do</div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card pending" onclick="filterByStatus('pending')">
                        <div class="stat-number" id="stat-pending">0</div>
                        <div class="stat-label">Requisi√ß√µes Pendentes</div>
                    </div>
                    <div class="stat-card signed" onclick="filterByStatus('signed')">
                        <div class="stat-number" id="stat-signed">0</div>
                        <div class="stat-label">Aprovadas</div>
                    </div>
                    <div class="stat-card fueled" onclick="filterByStatus('fueled')">
                        <div class="stat-number" id="stat-fueled">0</div>
                        <div class="stat-label">Abastecimentos</div>
                    </div>
                    <div class="stat-card completed" onclick="filterByStatus('completed')">
                        <div class="stat-number" id="stat-completed">0</div>
                        <div class="stat-label">Completas</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìã Atividades Recentes</div>
                        <button class="btn" onclick="showScreen('requests')">Ver Todas</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Motorista</th>
                                    <th>Ve√≠culo</th>
                                    <th>Cidade</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>Valor Est.</th>
                                    <th id="actions-header">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="recent-activities">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Requests Screen -->
            <div id="requests" class="screen">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìã Todas as Requisi√ß√µes</div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn" onclick="newRequest()">Nova Requisi√ß√£o</button>
                            <button class="btn btn-secondary" onclick="exportToExcel('requests')" id="export-requests-btn" style="display: none;">Exportar Excel</button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Motorista</th>
                                    <th>Ve√≠culo</th>
                                    <th>Cidade</th>
                                    <th>Posto</th>
                                    <th>Combust√≠vel</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>Supervisor</th>
                                    <th>Valor Est.</th>
                                    <th>KM</th>
                                    <th id="requests-actions-header">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="all-requests">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Fuel Records Screen -->
            <div id="fuel-records" class="screen">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">‚õΩ Registro de Abastecimento</div>
                        <button class="btn btn-secondary" onclick="exportToExcel('fuel-records')">Exportar Excel</button>
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID Requisi√ß√£o</th>
                                    <th>Motorista</th>
                                    <th>Ve√≠culo</th>
                                    <th>Posto</th>
                                    <th>Combust√≠vel</th>
                                    <th>Valor Est.</th>
                                    <th>Valor Real</th>
                                    <th>Litros</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="fuel-records-table">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Fuel Prices Screen -->
            <div id="fuel-prices" class="screen">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üí∞ Pre√ßos de Combust√≠veis</div>
                        <button class="btn" onclick="showUpdatePricesModal()">Atualizar Pre√ßos</button>
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Combust√≠vel</th>
                                    <th>Pre√ßo (R$/L)</th>
                                    <th>√öltima Atualiza√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody id="fuel-prices-table">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Vehicles Screen -->
            <div id="vehicles" class="screen">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üöö Frota de Ve√≠culos</div>
                        <button class="btn btn-secondary" onclick="exportToExcel('vehicles')">Exportar Excel</button>
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Placa</th>
                                    <th>Modelo</th>
                                    <th>Ano</th>
                                    <th>Status</th>
                                    <th>Cor</th>
                                    <th>KM</th>
                                    <th>√öltimo Abastecimento</th>
                                </tr>
                            </thead>
                            <tbody id="vehicles-table">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports Screen -->
            <div id="reports" class="screen">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìà Relat√≥rios e Estat√≠sticas</div>
                        <button class="btn" onclick="generateReport()">Gerar Relat√≥rio</button>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Per√≠odo Inicial:</label>
                            <input type="date" id="report-start-date">
                        </div>
                        <div class="form-group">
                            <label>Per√≠odo Final:</label>
                            <input type="date" id="report-end-date">
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Motorista:</label>
                            <select id="report-driver">
                                <option value="">Todos os motoristas</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Status:</label>
                            <select id="report-status">
                                <option value="">Todos os status</option>
                                <option value="pending">Pendentes</option>
                                <option value="signed">Aprovadas</option>
                                <option value="fueled">Abastecidas</option>
                                <option value="completed">Completas</option>
                                <option value="rejected">Rejeitadas</option>
                            </select>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card pending">
                            <div class="stat-number" id="report-total">0</div>
                            <div class="stat-label">Total de Requisi√ß√µes</div>
                        </div>
                        <div class="stat-card signed">
                            <div class="stat-number" id="report-approved">0</div>
                            <div class="stat-label">Aprovadas</div>
                        </div>
                        <div class="stat-card fueled">
                            <div class="stat-number" id="report-fueled">0</div>
                            <div class="stat-label">Abastecidas</div>
                        </div>
                        <div class="stat-card completed">
                            <div class="stat-number" id="report-completed">0</div>
                            <div class="stat-label">Completas</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Motorista</th>
                                    <th>Ve√≠culo</th>
                                    <th>Cidade</th>
                                    <th>Combust√≠vel</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>Valor Est.</th>
                                </tr>
                            </thead>
                            <tbody id="reports-table">
                                <!-- Preenchido via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Nova Requisi√ß√£o -->
    <div id="modal-new-request" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('modal-new-request')">&times;</span>
            <h3 style="margin-bottom: 20px;">üìã Nova Requisi√ß√£o de Abastecimento</h3>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Motorista: <span style="color: red;">*</span></label>
                    <input type="text" id="new-request-driver" value="" readonly style="background: #f1f5f9;">
                </div>
                <div class="form-group">
                    <label>Placa do Ve√≠culo: <span style="color: red;">*</span></label>
                    <select id="new-request-plate" onchange="updateVehicleModel()">
                        <option value="">Selecione a placa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Modelo do Ve√≠culo: <span style="color: red;">*</span></label>
                    <input type="text" id="new-request-vehicle-model" readonly style="background: #f1f5f9;">
                </div>
                <div class="form-group">
                    <label>Cidade: <span style="color: red;">*</span></label>
                    <select id="new-request-city">
                        <option value="">Selecione a cidade</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Posto de Combust√≠vel: <span style="color: red;">*</span></label>
                    <select id="new-request-gas-station">
                        <option value="">Selecione o posto</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tipo de Combust√≠vel: <span style="color: red;">*</span></label>
                    <select id="new-request-fuel-type">
                        <option value="">Selecione o combust√≠vel</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quilometragem Atual: <span style="color: red;">*</span></label>
                    <input type="number" id="new-request-km" placeholder="Ex: 15000">
                </div>
                <div class="form-group">
                    <label>Tipo de Abastecimento:</label>
                    <select id="new-request-fuel-method">
                        <option value="tanque">Tanque Completo</option>
                        <option value="galao">Gal√£o</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Prioridade:</label>
                    <select id="new-request-priority">
                        <option value="normal">Normal</option>
                        <option value="urgent">Urgente</option>
                        <option value="emergency">Emerg√™ncia</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label>Observa√ß√µes:</label>
                <textarea id="new-request-notes" rows="3" placeholder="Observa√ß√µes adicionais..."></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="createRequest()" style="flex: 1;">Criar Requisi√ß√£o</button>
                <button class="btn btn-secondary" onclick="closeModal('modal-new-request')" style="flex: 1;">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Atualizar Pre√ßos -->
    <div id="modal-update-prices" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('modal-update-prices')">&times;</span>
            <h3 style="margin-bottom: 20px;">üí∞ Atualizar Pre√ßos de Combust√≠veis</h3>
            
            <div class="form-grid" id="fuel-prices-form">
                <!-- Preenchido via JavaScript -->
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="updateFuelPrices()" style="flex: 1;">Atualizar Pre√ßos</button>
                <button class="btn btn-secondary" onclick="closeModal('modal-update-prices')" style="flex: 1;">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Notifica√ß√£o -->
    <div id="notification" class="notification"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // Estado global da aplica√ß√£o
        let currentRole = '';
        let isLoggedIn = false;
        let currentDriverName = '';

        // Listas de dados do sistema
        const cities = [
            'Santar√©m', 'Moju√≠ dos Campos', 'Lago Grande', 'Vila Gorete',
            'Juruti', 'Almeirim', 'Barcarena', 'Itaituba', 'Curuai',
            'Vila Brasil', 'Membeca', 'Ilha das On√ßas'
        ];

        const gasStations = [
            'Posto Leal (Itaituba)', 'Posto Top√°zio (Juruti)',
            'Posto Nossa Senhora de Nazar√© (Curua√≠)', 'Posto Amanhecer (Barcarena)',
            'Posto Equador (Frente da base)', 'Posto Equador (Muiraquit√£ com Turiano)',
            'Auto Amanhecer (Muiraquit√£ Frente a Base)', 'Posto Petrog√°s (Almerim)',
            'Posto S√£o Jo√£o (Moju√≠)'
        ];

        const fuelTypes = [
            'Diesel S10', 'Diesel Comum', 'Gasolina Comum',
            'Gasolina Aditivada', 'Etanol', 'GNV'
        ];

        // Lista de motoristas dispon√≠veis
        const availableDrivers = [
            'ABRA√ÉO TRINDADE ALBUQUERQUE', 'AIRTON VINICIUS DOS SANTOS OLIVEIRA',
            'ALAN DENNER PINTO DE SOUZA', 'ALESSANDRO OZITIO CAMPELO',
            'ARLISON NESTOR DA CONCEI√á√ÉO', 'CARLOS ALBERTO DOS SANTOS',
            'CIDARTA REGIS DE SOUZA', 'DANIEL PINTO PEDROSO',
            'DARLEN WILSON FERREIRA SILVA', 'DINEY RODRIGUES DOS PASSOS',
            'EDER JUNIOR PAPALEO DA SILVA', 'EDINEI DA SILVA FERREIRA',
            'EDUARDO PINHEIRO RODRIGUES', 'HELIO BARBOSA COSTA',
            'JACKSOM AMARAL DA SILVA', 'JANILDO PORTILHO SANTOS FILHO',
            'JO√ÉO BATISTA DA SILVA BEZERRA', 'JOELSON MONTEIRO PEREIRA',
            'JOSIVAN MACIEL DOS REIS', 'JUAN FABRICIO RODRIGUES DE LIMA',
            'JUNIPERO MANOEL DA SILVA LOPES', 'KLEBER JOSE DOS SANTOS PEREIRA',
            'MARCIO FERREIRA SABOIA', 'MARCOS ANDRE MENDES PEREIRA',
            'MARIVALDO DE JESUS CORREA', 'MARLISSON FEITOSA BEZERRA',
            'MATHEUS TRINDADE DE ALMEIDA', 'MICHAEL LUAN DOS SANTOS SILVA',
            'NILTON MARCOS MOTA CAMPOS', 'RENILDO FERREIRA LAVAREDA',
            'RIAN TEIXEIRA SIQUEIRA', 'ROM√ÅRIO LIMA RIKER',
            'LEONARDO NANTES ALVES', 'JARLISSON FABIO SANTOS DE SOUSA',
            'PEDRO HUEB TAPXURE CURRY', 'RAFAEL REZENDE DA SILVA'
        ];

        // Lista inicial de ve√≠culos
        const initialVehicles = [
            { plate: 'BCQ0937', model: 'F4000', year: '2023', status: 'Ativo', color: 'Branca', km: 0, lastFuel: 'Nunca' },
            { plate: 'JJB4E57', model: 'CARGO 1217', year: '2002', status: 'Ativo', color: 'Branco', km: 0, lastFuel: 'Nunca' },
        ];

        // Pre√ßos de combust√≠veis
        let fuelPrices = {
            'Diesel S10': 6.69,
            'Diesel Comum': 6.10,
            'Gasolina Comum': 6.43,
            'Gasolina Aditivada': 7.18,
            'Etanol': 4.39,
            'GNV': 5.13,
            lastUpdate: new Date().toISOString()
        };

        // Dados do sistema
        let requests = [];
        let vehicles = [];
        let fuelRecords = [];

        // ==================== SISTEMA DE ARMAZENAMENTO ====================

        function autoSave() {
            try {
                const data = {
                    requests: requests,
                    vehicles: vehicles,
                    fuelRecords: fuelRecords,
                    fuelPrices: fuelPrices,
                    lastSave: new Date().toISOString()
                };
                localStorage.setItem('rezende-energia-database', JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao salvar dados:', error);
                return false;
            }
        }

        function loadDataFromStorage() {
            try {
                const saved = localStorage.getItem('rezende-energia-database');
                if (saved) {
                    const data = JSON.parse(saved);
                    requests = data.requests || [];
                    vehicles = data.vehicles && data.vehicles.length > 0 ? data.vehicles : [...initialVehicles];
                    fuelRecords = data.fuelRecords || [];
                    fuelPrices = data.fuelPrices || fuelPrices;
                } else {
                    requests = [];
                    vehicles = [...initialVehicles];
                    fuelRecords = [];
                    autoSave();
                }
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados:', error);
                requests = [];
                vehicles = [...initialVehicles];
                fuelRecords = [];
            }
        }

        // ==================== FUN√á√ïES DE LOGIN SEPARADAS ====================

        function showDriverLogin() {
            const driverSelect = document.getElementById('driver-name');
            driverSelect.innerHTML = '<option value="">Selecione seu nome</option>';
            
            availableDrivers.forEach(driver => {
                const option = document.createElement('option');
                option.value = driver;
                option.textContent = driver;
                driverSelect.appendChild(option);
            });

            document.getElementById('role-selection').style.display = 'none';
            document.getElementById('driver-login').style.display = 'block';
        }

        function loginAsDriver() {
            const selectedDriver = document.getElementById('driver-name').value;
            
            if (!selectedDriver) {
                showNotification('Por favor, selecione seu nome!', 'error');
                return;
            }

            currentRole = 'motorista';
            currentDriverName = selectedDriver;
            isLoggedIn = true;
            
            showMainApp();
            showNotification(`Bem-vindo, ${selectedDriver.split(' ')[0]}!`, 'success');
        }

        function showSupervisorLogin() {
            document.getElementById('role-selection').style.display = 'none';
            document.getElementById('supervisor-login').style.display = 'block';
        }

        function loginAsSupervisor() {
            const username = document.getElementById('supervisor-username').value;
            const password = document.getElementById('supervisor-password').value;

            const supervisors = {
                'Airton': '123',
                'Eduardo': '2025',
                'Pedro': '456'
            };

            if (supervisors[username] && supervisors[username] === password) {
                currentRole = 'supervisor';
                currentDriverName = username;
                isLoggedIn = true;
                showMainApp();
                showNotification(`Bem-vindo, Supervisor ${username}!`, 'success');
            } else {
                showNotification('Usu√°rio ou senha incorretos!', 'error');
            }
        }

        function backToRoleSelection() {
            document.getElementById('role-selection').style.display = 'block';
            document.getElementById('driver-login').style.display = 'none';
            document.getElementById('supervisor-login').style.display = 'none';
        }

        function logout() {
            isLoggedIn = false;
            currentRole = '';
            currentDriverName = '';
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('main-app').style.display = 'none';

            document.getElementById('supervisor-username').value = '';
            document.getElementById('supervisor-password').value = '';
            document.getElementById('driver-name').value = '';
            backToRoleSelection();
            
            showNotification('Logout realizado com sucesso!', 'success');
        }

        function showMainApp() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'flex';

            setupUserInterface();
            updateCurrentDate();
            loadRecentActivities();
            loadAllRequests();
            populateSelects();
            updateStats();
            
            showNotification('Sistema carregado com sucesso!', 'success');
        }

        function setupUserInterface() {
            const userRoleDisplay = document.getElementById('user-role-display');
            const navVehicles = document.getElementById('nav-vehicles');
            const navReports = document.getElementById('nav-reports');
            const navFuelRecords = document.getElementById('nav-fuel-records');
            const navFuelPrices = document.getElementById('nav-fuel-prices');
            const actionReports = document.getElementById('action-reports');
            const actionExport = document.getElementById('action-export');
            const exportRequestsBtn = document.getElementById('export-requests-btn');
            const statsGrid = document.getElementById('stats-grid');
            const actionsHeader = document.getElementById('actions-header');
            const requestsActionsHeader = document.getElementById('requests-actions-header');

            if (currentRole === 'supervisor') {
                userRoleDisplay.textContent = `üë®‚Äçüíº Supervisor - ${currentDriverName}`;
                if (navVehicles) navVehicles.classList.remove('hidden');
                if (navReports) navReports.classList.remove('hidden');
                if (navFuelRecords) navFuelRecords.classList.remove('hidden');
                if (navFuelPrices) navFuelPrices.classList.remove('hidden');
                if (actionReports) actionReports.style.display = 'block';
                if (actionExport) actionExport.style.display = 'block';
                if (exportRequestsBtn) exportRequestsBtn.style.display = 'block';
                if (statsGrid) statsGrid.style.pointerEvents = 'auto';
                if (actionsHeader) actionsHeader.style.display = 'table-cell';
                if (requestsActionsHeader) requestsActionsHeader.style.display = 'table-cell';
            } else {
                userRoleDisplay.textContent = `üöõ Motorista - ${currentDriverName}`;
                if (navVehicles) navVehicles.classList.add('hidden');
                if (navReports) navReports.classList.add('hidden');
                if (navFuelRecords) navFuelRecords.classList.add('hidden');
                if (navFuelPrices) navFuelPrices.classList.add('hidden');
                if (actionReports) actionReports.style.display = 'none';
                if (actionExport) actionExport.style.display = 'none';
                if (exportRequestsBtn) exportRequestsBtn.style.display = 'none';
                if (statsGrid) statsGrid.style.pointerEvents = 'none';
                if (actionsHeader) actionsHeader.style.display = 'none';
                if (requestsActionsHeader) requestsActionsHeader.style.display = 'none';
            }
        }

        // ==================== FUN√á√ïES DAS TELAS DO SUPERVISOR ====================

        function loadFuelRecords() {
            const tbody = document.getElementById('fuel-records-table');
            if (!tbody) return;

            if (fuelRecords.length === 0) {
                tbody.innerHTML = '<tr><td colspan="11" style="text-align: center; color: #64748b; padding: 40px;">Nenhum registro de abastecimento encontrado</td></tr>';
                return;
            }

            tbody.innerHTML = fuelRecords.map(record => `
                <tr>
                    <td><strong>${record.requestId}</strong></td>
                    <td>${record.driver}</td>
                    <td>${record.vehicle}</td>
                    <td>${record.gasStation}</td>
                    <td>${record.fuelType}</td>
                    <td>${record.estimatedValue}</td>
                    <td>${record.realValue || 'N/A'}</td>
                    <td>${record.liters || 'N/A'}</td>
                    <td><span class="status-badge status-${record.status}">${getStatusText(record.status)}</span></td>
                    <td>${formatDate(record.date)}</td>
                    <td>
                        <button class="btn btn-small" onclick="viewFuelRecord('${record.requestId}')">üëÅÔ∏è</button>
                        ${record.status === 'pending' ? `
                            <button class="btn btn-small btn-success" onclick="completeFuelRecord('${record.requestId}')">‚úÖ</button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
        }

        function loadFuelPrices() {
            const tbody = document.getElementById('fuel-prices-table');
            if (!tbody) return;

            tbody.innerHTML = Object.entries(fuelPrices)
                .filter(([key]) => key !== 'lastUpdate')
                .map(([fuel, price]) => `
                <tr>
                    <td><strong>${fuel}</strong></td>
                    <td>R$ ${price.toFixed(2)}</td>
                    <td>${formatDate(fuelPrices.lastUpdate)}</td>
                </tr>
            `).join('');
        }

        function loadVehicles() {
            const tbody = document.getElementById('vehicles-table');
            if (!tbody) return;

            tbody.innerHTML = vehicles.map(vehicle => `
                <tr>
                    <td><strong>${vehicle.plate}</strong></td>
                    <td>${vehicle.model}</td>
                    <td>${vehicle.year}</td>
                    <td><span class="status-badge ${vehicle.status === 'Ativo' ? 'status-signed' : 'status-rejected'}">${vehicle.status}</span></td>
                    <td>${vehicle.color}</td>
                    <td>${vehicle.km.toLocaleString()} km</td>
                    <td>${vehicle.lastFuel}</td>
                </tr>
            `).join('');
        }

        function showUpdatePricesModal() {
            const form = document.getElementById('fuel-prices-form');
            form.innerHTML = Object.entries(fuelPrices)
                .filter(([key]) => key !== 'lastUpdate')
                .map(([fuel, price]) => `
                <div class="form-group">
                    <label>${fuel}:</label>
                    <input type="number" step="0.01" id="price-${fuel.replace(/\s+/g, '-')}" value="${price}" placeholder="Pre√ßo por litro">
                </div>
            `).join('');

            document.getElementById('modal-update-prices').classList.add('active');
        }

        function updateFuelPrices() {
            Object.keys(fuelPrices)
                .filter(key => key !== 'lastUpdate')
                .forEach(fuel => {
                    const input = document.getElementById(`price-${fuel.replace(/\s+/g, '-')}`);
                    if (input && input.value) {
                        fuelPrices[fuel] = parseFloat(input.value);
                    }
                });

            fuelPrices.lastUpdate = new Date().toISOString();
            autoSave();
            loadFuelPrices();
            closeModal('modal-update-prices');
            showNotification('Pre√ßos atualizados com sucesso!', 'success');
        }

        function generateReport() {
            const startDate = document.getElementById('report-start-date').value;
            const endDate = document.getElementById('report-end-date').value;
            const driver = document.getElementById('report-driver').value;
            const status = document.getElementById('report-status').value;

            let filteredRequests = [...requests];

            // Filtrar por data
            if (startDate) {
                filteredRequests = filteredRequests.filter(req => req.date >= startDate);
            }
            if (endDate) {
                filteredRequests = filteredRequests.filter(req => req.date <= endDate);
            }

            // Filtrar por motorista
            if (driver) {
                filteredRequests = filteredRequests.filter(req => req.driver === driver);
            }

            // Filtrar por status
            if (status) {
                filteredRequests = filteredRequests.filter(req => req.status === status);
            }

            // Atualizar estat√≠sticas do relat√≥rio
            document.getElementById('report-total').textContent = filteredRequests.length;
            document.getElementById('report-approved').textContent = filteredRequests.filter(req => req.status === 'signed').length;
            document.getElementById('report-fueled').textContent = filteredRequests.filter(req => req.status === 'fueled').length;
            document.getElementById('report-completed').textContent = filteredRequests.filter(req => req.status === 'completed').length;

            // Atualizar tabela
            const tbody = document.getElementById('reports-table');
            if (filteredRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #64748b; padding: 40px;">Nenhuma requisi√ß√£o encontrada</td></tr>';
                return;
            }

            tbody.innerHTML = filteredRequests.map(req => `
                <tr>
                    <td><strong>${req.id}</strong></td>
                    <td>${req.driver}</td>
                    <td>${req.vehicle}</td>
                    <td>${req.city || 'N/A'}</td>
                    <td>${req.fuelType || 'N/A'}</td>
                    <td><span class="status-badge status-${req.status}">${getStatusText(req.status)}</span></td>
                    <td>${formatDate(req.date)}</td>
                    <td>${req.estimatedValue || 'N/A'}</td>
                </tr>
            `).join('');

            showNotification('Relat√≥rio gerado com sucesso!', 'success');
        }

        // ==================== EXPORTA√á√ÉO PARA EXCEL ====================

        function exportToExcel(type) {
            try {
                let data = [];
                let fileName = '';

                switch(type) {
                    case 'requests':
                        data = requests.map(req => ({
                            'ID': req.id,
                            'Motorista': req.driver,
                            'Ve√≠culo': req.vehicle,
                            'Cidade': req.city,
                            'Posto': req.gasStation,
                            'Combust√≠vel': req.fuelType,
                            'Status': getStatusText(req.status),
                            'Data': formatDate(req.date),
                            'Supervisor': req.supervisor,
                            'Valor Estimado': req.estimatedValue,
                            'KM': req.km,
                            'Prioridade': req.priority,
                            'Observa√ß√µes': req.notes
                        }));
                        fileName = 'requisicoes_abastecimento.xlsx';
                        break;

                    case 'fuel-records':
                        data = fuelRecords.map(record => ({
                            'ID Requisi√ß√£o': record.requestId,
                            'Motorista': record.driver,
                            'Ve√≠culo': record.vehicle,
                            'Posto': record.gasStation,
                            'Combust√≠vel': record.fuelType,
                            'Valor Estimado': record.estimatedValue,
                            'Valor Real': record.realValue || 'N/A',
                            'Litros': record.liters || 'N/A',
                            'Status': getStatusText(record.status),
                            'Data': formatDate(record.date),
                            'Observa√ß√µes': record.notes
                        }));
                        fileName = 'registros_abastecimento.xlsx';
                        break;

                    case 'vehicles':
                        data = vehicles.map(vehicle => ({
                            'Placa': vehicle.plate,
                            'Modelo': vehicle.model,
                            'Ano': vehicle.year,
                            'Status': vehicle.status,
                            'Cor': vehicle.color,
                            'KM': vehicle.km,
                            '√öltimo Abastecimento': vehicle.lastFuel
                        }));
                        fileName = 'frota_veiculos.xlsx';
                        break;

                    case 'all':
                        // Criar workbook com m√∫ltiplas abas
                        const wb = XLSX.utils.book_new();
                        
                        // Aba de requisi√ß√µes
                        const requestsData = requests.map(req => ({
                            'ID': req.id,
                            'Motorista': req.driver,
                            'Ve√≠culo': req.vehicle,
                            'Cidade': req.city,
                            'Posto': req.gasStation,
                            'Combust√≠vel': req.fuelType,
                            'Status': getStatusText(req.status),
                            'Data': formatDate(req.date),
                            'Supervisor': req.supervisor,
                            'Valor Estimado': req.estimatedValue,
                            'KM': req.km,
                            'Prioridade': req.priority,
                            'Observa√ß√µes': req.notes
                        }));
                        const ws1 = XLSX.utils.json_to_sheet(requestsData);
                        XLSX.utils.book_append_sheet(wb, ws1, 'Requisi√ß√µes');

                        // Aba de registros
                        const recordsData = fuelRecords.map(record => ({
                            'ID Requisi√ß√£o': record.requestId,
                            'Motorista': record.driver,
                            'Ve√≠culo': record.vehicle,
                            'Posto': record.gasStation,
                            'Combust√≠vel': record.fuelType,
                            'Valor Estimado': record.estimatedValue,
                            'Valor Real': record.realValue || 'N/A',
                            'Litros': record.liters || 'N/A',
                            'Status': getStatusText(record.status),
                            'Data': formatDate(record.date)
                        }));
                        const ws2 = XLSX.utils.json_to_sheet(recordsData);
                        XLSX.utils.book_append_sheet(wb, ws2, 'Registros Abastecimento');

                        // Aba de ve√≠culos
                        const vehiclesData = vehicles.map(vehicle => ({
                            'Placa': vehicle.plate,
                            'Modelo': vehicle.model,
                            'Ano': vehicle.year,
                            'Status': vehicle.status,
                            'Cor': vehicle.color,
                            'KM': vehicle.km,
                            '√öltimo Abastecimento': vehicle.lastFuel
                        }));
                        const ws3 = XLSX.utils.json_to_sheet(vehiclesData);
                        XLSX.utils.book_append_sheet(wb, ws3, 'Ve√≠culos');

                        XLSX.writeFile(wb, 'sistema_abastecimento_completo.xlsx');
                        showNotification('Exporta√ß√£o completa realizada com sucesso!', 'success');
                        return;

                    default:
                        showNotification('Tipo de exporta√ß√£o n√£o reconhecido!', 'error');
                        return;
                }

                if (type !== 'all') {
                    const ws = XLSX.utils.json_to_sheet(data);
                    const wb = XLSX.utils.book_new();
                    XLSX.utils.book_append_sheet(wb, ws, 'Dados');
                    XLSX.writeFile(wb, fileName);
                    showNotification(`Exporta√ß√£o para ${fileName} realizada com sucesso!`, 'success');
                }

            } catch (error) {
                console.error('Erro na exporta√ß√£o:', error);
                showNotification('Erro ao exportar dados para Excel!', 'error');
            }
        }

        // ==================== FUN√á√ÉO DE CRIAR REQUISI√á√ÉO ====================

        function createRequest() {
            const plate = document.getElementById('new-request-plate').value;
            const vehicleModel = document.getElementById('new-request-vehicle-model').value;
            const city = document.getElementById('new-request-city').value;
            const gasStation = document.getElementById('new-request-gas-station').value;
            const fuelType = document.getElementById('new-request-fuel-type').value;
            const km = document.getElementById('new-request-km').value;
            const fuelMethod = document.getElementById('new-request-fuel-method').value;
            const priority = document.getElementById('new-request-priority').value;
            const notes = document.getElementById('new-request-notes').value;

            if (!plate || !city || !gasStation || !fuelType || !km) {
                showNotification('Por favor, preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }

            const newId = `REQ-${new Date().getFullYear()}-${String(requests.length + 1).padStart(3, '0')}`;
            const today = new Date().toISOString().split('T')[0];

            const newRequest = {
                id: newId,
                driver: currentDriverName,
                plate: plate,
                vehicle: `${vehicleModel} - ${plate}`,
                city: city,
                gasStation: gasStation,
                fuelType: fuelType,
                fuelMethod: fuelMethod,
                status: 'pending',
                date: today,
                supervisor: 'Pendente',
                estimatedValue: 'A definir',
                realValue: null,
                km: parseInt(km),
                priority: priority,
                notes: notes || 'Sem observa√ß√µes',
                createdAt: new Date().toISOString()
            };

            requests.unshift(newRequest);

            // Criar registro de abastecimento associado
            const newFuelRecord = {
                requestId: newId,
                driver: currentDriverName,
                vehicle: `${vehicleModel} - ${plate}`,
                gasStation: gasStation,
                fuelType: fuelType,
                estimatedValue: 'A definir',
                realValue: null,
                liters: null,
                status: 'pending',
                date: today,
                notes: notes || ''
            };

            fuelRecords.unshift(newFuelRecord);

            if (autoSave()) {
                loadRecentActivities();
                loadAllRequests();
                updateStats();

                closeModal('modal-new-request');
                clearForm('new-request');

                showNotification(`Requisi√ß√£o ${newId} criada com sucesso!`, 'success');
            } else {
                showNotification('Erro ao salvar requisi√ß√£o!', 'error');
            }
        }

        // ==================== FUN√á√ïES RESTANTES DO SISTEMA ====================

        function updateCurrentDate() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('pt-BR', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const dateElement = document.getElementById('current-date');
            if (dateElement) {
                dateElement.textContent = dateStr;
            }
        }

        function showScreen(screenId) {
            if (currentRole === 'motorista' && ['vehicles', 'reports', 'fuel-records', 'fuel-prices'].includes(screenId)) {
                showNotification('Acesso negado! Esta funcionalidade √© apenas para supervisores.', 'error');
                return;
            }

            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            const screenElement = document.getElementById(screenId);
            if (screenElement) {
                screenElement.classList.add('active');
            }

            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.textContent.includes(getScreenName(screenId))) {
                    item.classList.add('active');
                }
            });

            // Carregar dados espec√≠ficos da tela
            switch(screenId) {
                case 'requests':
                    loadAllRequests();
                    break;
                case 'fuel-records':
                    loadFuelRecords();
                    break;
                case 'fuel-prices':
                    loadFuelPrices();
                    break;
                case 'vehicles':
                    loadVehicles();
                    break;
                case 'reports':
                    loadReportFilters();
                    generateReport();
                    break;
            }
        }

        function loadReportFilters() {
            const driverSelect = document.getElementById('report-driver');
            driverSelect.innerHTML = '<option value="">Todos os motoristas</option>';
            
            const uniqueDrivers = [...new Set(requests.map(req => req.driver))];
            uniqueDrivers.forEach(driver => {
                const option = document.createElement('option');
                option.value = driver;
                option.textContent = driver;
                driverSelect.appendChild(option);
            });
        }

        function getScreenName(screenId) {
            const screenNames = {
                'dashboard': 'üìä',
                'requests': 'üìã',
                'fuel-records': '‚õΩ',
                'fuel-prices': 'üí∞',
                'vehicles': 'üöö',
                'reports': 'üìà'
            };
            return screenNames[screenId] || '';
        }

        // Fun√ß√£o para popular selects
        function populateSelects() {
            // Popular cidade
            const citySelects = ['new-request-city'];
            citySelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">Selecione uma cidade</option>';
                    cities.forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        select.appendChild(option);
                    });
                }
            });

            // Popular postos
            const stationSelects = ['new-request-gas-station'];
            stationSelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">Selecione um posto</option>';
                    gasStations.forEach(station => {
                        const option = document.createElement('option');
                        option.value = station;
                        option.textContent = station;
                        select.appendChild(option);
                    });
                }
            });

            // Popular combust√≠veis
            const fuelSelects = ['new-request-fuel-type'];
            fuelSelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">Selecione o combust√≠vel</option>';
                    fuelTypes.forEach(fuel => {
                        const option = document.createElement('option');
                        option.value = fuel;
                        option.textContent = fuel;
                        select.appendChild(option);
                    });
                }
            });

            // Atualizar placa do ve√≠culo e nome do motorista
            updateVehiclePlatesSelect();
            updateDriverName();
        }

        function updateVehiclePlatesSelect() {
            const plateSelect = document.getElementById('new-request-plate');
            if (plateSelect) {
                plateSelect.innerHTML = '<option value="">Selecione uma placa</option>';

                vehicles.forEach(vehicle => {
                    const option = document.createElement('option');
                    option.value = vehicle.plate;
                    option.textContent = vehicle.plate;
                    option.setAttribute('data-model', vehicle.model);
                    plateSelect.appendChild(option);
                });
            }
        }

        function updateDriverName() {
            const driverInput = document.getElementById('new-request-driver');
            if (driverInput) {
                driverInput.value = currentDriverName;
            }
        }

        function updateVehicleModel() {
            const plateSelect = document.getElementById('new-request-plate');
            const modelInput = document.getElementById('new-request-vehicle-model');

            if (plateSelect && modelInput) {
                const selectedOption = plateSelect.options[plateSelect.selectedIndex];
                if (selectedOption && selectedOption.getAttribute('data-model')) {
                    modelInput.value = selectedOption.getAttribute('data-model');
                } else {
                    modelInput.value = '';
                }
            }
        }

        // Carregar atividades recentes
        function loadRecentActivities() {
            const tbody = document.getElementById('recent-activities');
            if (!tbody) return;

            let recentRequests = requests.slice(0, 5);

            if (currentRole === 'motorista') {
                recentRequests = requests.filter(req => req.driver === currentDriverName).slice(0, 5);
            }

            if (recentRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #64748b; padding: 40px;">Nenhuma requisi√ß√£o encontrada</td></tr>';
                return;
            }

            tbody.innerHTML = recentRequests.map(req => `
                <tr>
                    <td><strong>${req.id}</strong></td>
                    <td>${req.driver}</td>
                    <td>${req.vehicle}</td>
                    <td>${req.city || 'N/A'}</td>
                    <td><span class="status-badge status-${req.status}">${getStatusText(req.status)}</span></td>
                    <td>${formatDate(req.date)}</td>
                    <td>${req.estimatedValue || 'N/A'}</td>
                    <td>
                        <button class="btn btn-small" onclick="viewRequest('${req.id}')">üëÅÔ∏è</button>
                        ${currentRole === 'supervisor' && req.status === 'pending' ? `
                            <button class="btn btn-small btn-success" onclick="approveRequest('${req.id}')">‚úÖ</button>
                            <button class="btn btn-small btn-danger" onclick="rejectRequest('${req.id}')">‚ùå</button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
        }

        // Carregar todas as requisi√ß√µes
        function loadAllRequests() {
            const tbody = document.getElementById('all-requests');
            if (!tbody) return;

            let filteredRequests = [...requests];

            if (currentRole === 'motorista') {
                filteredRequests = requests.filter(req => req.driver === currentDriverName);
            }

            if (filteredRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="12" style="text-align: center; color: #64748b; padding: 40px;">Nenhuma requisi√ß√£o encontrada</td></tr>';
                return;
            }

            tbody.innerHTML = filteredRequests.map(req => `
                <tr>
                    <td><strong>${req.id}</strong></td>
                    <td>${req.driver}</td>
                    <td>${req.vehicle}</td>
                    <td>${req.city || 'N/A'}</td>
                    <td>${req.gasStation || 'N/A'}</td>
                    <td>${req.fuelType || 'N/A'}</td>
                    <td><span class="status-badge status-${req.status}">${getStatusText(req.status)}</span></td>
                    <td>${formatDate(req.date)}</td>
                    <td>${req.supervisor || 'N/A'}</td>
                    <td>${req.estimatedValue || 'N/A'}</td>
                    <td>${req.km ? req.km.toLocaleString() + ' km' : 'N/A'}</td>
                    <td>
                        <button class="btn btn-small" onclick="viewRequest('${req.id}')">üëÅÔ∏è</button>
                        ${currentRole === 'supervisor' && req.status === 'pending' ? `
                            <button class="btn btn-small btn-success" onclick="approveRequest('${req.id}')">‚úÖ</button>
                            <button class="btn btn-small btn-danger" onclick="rejectRequest('${req.id}')">‚ùå</button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
        }

        // Fun√ß√µes auxiliares
        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pendente',
                'signed': 'Aprovado',
                'rejected': 'Rejeitado',
                'fueled': 'Abastecido',
                'completed': 'Completo'
            };
            return statusMap[status] || status;
        }

        function formatDate(dateStr) {
            if (!dateStr || dateStr === 'Nunca') return 'Nunca';
            try {
                const date = new Date(dateStr + 'T00:00:00');
                return date.toLocaleDateString('pt-BR');
            } catch (e) {
                return dateStr;
            }
        }

        // Atualizar estat√≠sticas
        function updateStats() {
            let filteredRequests = requests;

            if (currentRole === 'motorista') {
                filteredRequests = requests.filter(req => req.driver === currentDriverName);
            }

            const stats = {
                pending: filteredRequests.filter(req => req.status === 'pending').length,
                signed: filteredRequests.filter(req => req.status === 'signed').length,
                fueled: filteredRequests.filter(req => req.status === 'fueled').length,
                completed: filteredRequests.filter(req => req.status === 'completed').length
            };

            const statPending = document.getElementById('stat-pending');
            const statSigned = document.getElementById('stat-signed');
            const statFueled = document.getElementById('stat-fueled');
            const statCompleted = document.getElementById('stat-completed');

            if (statPending) statPending.textContent = stats.pending;
            if (statSigned) statSigned.textContent = stats.signed;
            if (statFueled) statFueled.textContent = stats.fueled;
            if (statCompleted) statCompleted.textContent = stats.completed;
        }

        // A√ß√µes de requisi√ß√µes
        function newRequest() {
            updateDriverName();
            document.getElementById('modal-new-request').classList.add('active');
        }

        function approveRequest(reqId) {
            if (currentRole !== 'supervisor') {
                showNotification('Apenas supervisores podem aprovar requisi√ß√µes!', 'error');
                return;
            }

            const request = requests.find(req => req.id === reqId);
            if (request && request.status === 'pending') {
                request.status = 'signed';
                request.supervisor = currentDriverName;

                const fuelRecord = fuelRecords.find(record => record.requestId === reqId);
                if (fuelRecord) {
                    fuelRecord.status = 'signed';
                }

                autoSave();

                loadRecentActivities();
                loadAllRequests();
                loadFuelRecords();
                updateStats();

                showNotification(`Requisi√ß√£o ${reqId} aprovada com sucesso!`, 'success');
            }
        }

        function rejectRequest(reqId) {
            if (currentRole !== 'supervisor') {
                showNotification('Apenas supervisores podem rejeitar requisi√ß√µes!', 'error');
                return;
            }

            const request = requests.find(req => req.id === reqId);
            if (request && request.status === 'pending') {
                request.status = 'rejected';
                request.supervisor = currentDriverName;

                const fuelRecord = fuelRecords.find(record => record.requestId === reqId);
                if (fuelRecord) {
                    fuelRecord.status = 'rejected';
                }

                autoSave();

                loadRecentActivities();
                loadAllRequests();
                loadFuelRecords();
                updateStats();

                showNotification(`Requisi√ß√£o ${reqId} rejeitada!`, 'warning');
            }
        }

        function completeFuelRecord(reqId) {
            const fuelRecord = fuelRecords.find(record => record.requestId === reqId);
            if (fuelRecord && fuelRecord.status === 'signed') {
                const realValue = prompt('Digite o valor real do abastecimento:');
                const liters = prompt('Digite a quantidade de litros abastecida:');
                
                if (realValue && liters) {
                    fuelRecord.realValue = `R$ ${parseFloat(realValue).toFixed(2)}`;
                    fuelRecord.liters = `${parseFloat(liters).toFixed(2)} L`;
                    fuelRecord.status = 'completed';

                    const request = requests.find(req => req.id === reqId);
                    if (request) {
                        request.status = 'completed';
                        request.realValue = fuelRecord.realValue;
                    }

                    autoSave();
                    loadFuelRecords();
                    loadAllRequests();
                    updateStats();
                    showNotification(`Abastecimento ${reqId} registrado com sucesso!`, 'success');
                }
            }
        }

        function viewRequest(reqId) {
            const request = requests.find(req => req.id === reqId);
            if (request) {
                const priorityText = {
                    'normal': 'Normal',
                    'urgent': 'Urgente',
                    'emergency': 'Emerg√™ncia'
                };

                const fuelMethodText = {
                    'tanque': 'Tanque Completo',
                    'galao': 'Gal√£o'
                };

                alert(`
üìã DETALHES DA REQUISI√á√ÉO ${reqId}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ Motorista: ${request.driver}
üöö Ve√≠culo: ${request.vehicle}
üèôÔ∏è Cidade: ${request.city || 'N/A'}
‚õΩ Posto: ${request.gasStation || 'N/A'}
üõ¢Ô∏è Combust√≠vel: ${request.fuelType || 'N/A'}
üîß Tipo de Abastecimento: ${fuelMethodText[request.fuelMethod] || 'N/A'}
üìÖ Data: ${formatDate(request.date)}
üë®‚Äçüíº Supervisor: ${request.supervisor}
üí∞ Valor Estimado: ${request.estimatedValue || 'N/A'}
${request.realValue ? `üí∞ Valor Real: ${request.realValue}` : ''}
üõ£Ô∏è Quilometragem: ${request.km ? request.km.toLocaleString() + ' km' : 'N/A'}
‚ö° Prioridade: ${priorityText[request.priority] || 'N/A'}
üìä Status: ${getStatusText(request.status)}
üìù Observa√ß√µes: ${request.notes}
                `);
            }
        }

        function viewFuelRecord(reqId) {
            const record = fuelRecords.find(record => record.requestId === reqId);
            if (record) {
                alert(`
‚õΩ REGISTRO DE ABASTECIMENTO ${reqId}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ Motorista: ${record.driver}
üöö Ve√≠culo: ${record.vehicle}
‚õΩ Posto: ${record.gasStation}
üõ¢Ô∏è Combust√≠vel: ${record.fuelType}
üí∞ Valor Estimado: ${record.estimatedValue}
${record.realValue ? `üí∞ Valor Real: ${record.realValue}` : ''}
${record.liters ? `‚õΩ Litros: ${record.liters}` : ''}
üìä Status: ${getStatusText(record.status)}
üìÖ Data: ${formatDate(record.date)}
${record.notes ? `üìù Observa√ß√µes: ${record.notes}` : ''}
                `);
            }
        }

        // Utilit√°rios
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function clearForm(prefix) {
            const inputs = document.querySelectorAll(`[id^="${prefix}"]`);
            inputs.forEach(input => {
                if (input.type === 'text' || input.type === 'number' || input.type === 'email' || input.tagName === 'TEXTAREA') {
                    input.value = '';
                } else if (input.tagName === 'SELECT') {
                    input.selectedIndex = 0;
                }
            });
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;

            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function filterByStatus(status) {
            if (currentRole === 'motorista') {
                showNotification('Filtros dispon√≠veis apenas para supervisores', 'warning');
                return;
            }
            showScreen('requests');
            showNotification(`Filtrando por status: ${getStatusText(status)}`, 'success');
        }

        // Inicializa√ß√£o do sistema
        document.addEventListener('DOMContentLoaded', function() {
            loadDataFromStorage();

            console.log('üöõ Sistema Rezende Energia - Pronto para Login');

            setTimeout(() => {
                if (!isLoggedIn) {
                    showNotification('Bem-vindo ao Sistema Rezende Energia! Fa√ßa login para come√ßar.', 'success');
                }
            }, 1000);
        });
    </script>
</body>
</html>
